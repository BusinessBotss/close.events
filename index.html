<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CLOSE – Private Events</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      /* Color Palette */
      --color-black: #000;
      --color-white: #fff;
      --color-dark-gray: #444;
      --color-light-gray: rgba(255, 255, 255, 0.05);
      --color-accent-pink: #D1007F;
      --color-dark-pink: #8B004B;
      --color-gold: #FFD700;
      --color-dark-bg-select: #111;

      /* Font Families */
      --font-primary: 'Cormorant Garamond', serif;

      /* Spacing */
      --spacing-xs: 10px;
      --spacing-sm: 15px;
      --spacing-md: 20px;
      --spacing-lg: 30px;

      /* Border Radii */
      --border-radius-sm: 8px;
      --border-radius-md: 12px;

      /* Font Sizes */
      --font-size-base: 1rem;
      --font-size-lg: 1.1rem;
      --font-size-xl: 2.5rem;
    }

    /* Base Styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: var(--color-black);
      color: var(--color-white);
      font-family: var(--font-primary);
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      padding: var(--spacing-md);
      text-align: center;
    }

    h1 {
      font-size: var(--font-size-xl);
      margin-bottom: var(--spacing-md);
    }

    /* Container for the form */
    .container {
      width: 100%;
      max-width: 500px;
      display: flex;
      flex-direction: column;
      gap: var(--spacing-sm);
      animation: fadeInUp 0.8s ease-out forwards;
      opacity: 0;
      transform: translateY(var(--spacing-lg));
    }

    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Form Elements */
    label {
      text-align: left;
      font-size: var(--font-size-lg);
    }

    input,
    select,
    textarea {
      padding: var(--spacing-xs);
      background: var(--color-light-gray);
      border: 1px solid var(--color-dark-gray);
      border-radius: var(--border-radius-sm);
      color: var(--color-white);
      font-family: var(--font-primary);
      font-size: var(--font-size-base);
    }

    input:focus,
    select:focus,
    textarea:focus {
      border-color: var(--color-accent-pink);
      outline: none;
    }

    /* Button Styles */
    .btn {
      padding: 12px; /* Keeping this specific for button */
      font-weight: bold;
      font-size: var(--font-size-lg);
      color: var(--color-white);
      background: transparent;
      border: 2px solid;
      border-image: linear-gradient(45deg, var(--color-dark-pink), var(--color-accent-pink)) 1;
      border-radius: var(--border-radius-md);
      position: relative;
      cursor: pointer;
      transition: box-shadow 0.3s ease, background 0.3s ease;
    }

    .btn:hover {
      box-shadow: 0 0 12px var(--color-accent-pink);
      background: var(--color-light-gray);
    }

    /* Success Message */
    .success-message {
      color: var(--color-gold);
      margin-top: var(--spacing-md);
      font-weight: bold;
      animation: fadeIn 0.5s ease-out forwards;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    /* Language Selector */
    .lang-select {
      align-self: flex-end;
      margin-bottom: var(--spacing-sm);
      background: var(--color-dark-bg-select);
      color: var(--color-gold);
      border: none;
      font-family: var(--font-primary);
      padding: var(--spacing-xs);
      border-radius: var(--border-radius-sm);
      cursor: pointer;
    }
  </style>
</head>
<body>
  <select class="lang-select" onchange="updateText(this.value)" aria-label="Select Language">
    <option value="en">EN</option>
    <option value="es">ES</option>
    <option value="fr">FR</option>
    <option value="de">DE</option>
  </select>

  <h1 id="title">Request Access to CLOSE</h1>
  <form class="container" id="closeForm" aria-live="polite">
    <label for="name" id="label-name">Full Name</label>
    <input type="text" id="name" name="name" required autocomplete="name">

    <label for="age" id="label-age">Age</label>
    <input type="number" id="age" name="age" min="18" required aria-describedby="age-help">
    <small id="age-help" style="display:none;">Must be 18 years or older.</small>

    <label for="city" id="label-city">City</label>
    <input type="text" id="city" name="city" required autocomplete="address-level2">

    <label for="contact" id="label-contact">Preferred Contact Method</label>
    <select id="contact" name="contact" required>
      <option value="">Select</option>
      <option value="WhatsApp">WhatsApp</option>
      <option value="Email">Email</option>
      <option value="SMS">SMS</option>
    </select>

    <label for="number" id="label-number">Contact Number</label>
    <input type="tel" id="number" name="number" required autocomplete="tel">

    <label for="portfolio" id="label-portfolio">Social/Portfolio (optional)</label>
    <input type="url" id="portfolio" name="portfolio" placeholder="e.g., https://instagram.com/yourprofile">

    <label for="why" id="label-why">Why do you want to attend?</label>
    <textarea id="why" name="why" rows="4" required></textarea>

    <label for="availability" id="label-availability">Availability</label>
    <input type="text" id="availability" name="availability" required placeholder="e.g., Weekends, Evenings">

    <button class="btn" type="submit">Submit Request</button>
    <div class="success-message" id="successMessage" style="display:none" role="status">Request Sent ✔</div>
    <div class="error-message" id="errorMessage" style="display:none; color: red; margin-top: 10px;" role="alert"></div>
  </form>

  <script>
    // ¡IMPORTANTE! Asegúrate de que esta URL sea la de tu Google Apps Script desplegado.
    // La URL correcta que obtuviste es:
    const scriptURL = 'https://script.google.com/macros/s/AKfycbyYWFpVrPqyLwlx8Uh_AjQKTESuU_CRIzLTh-uvAZZIHHjR3HmXEoK5c1608kz8bzrz/exec';

    const form = document.getElementById('closeForm');
    const successMessage = document.getElementById('successMessage');
    const errorMessage = document.getElementById('errorMessage');

    // Maneja el envío del formulario
    form.addEventListener('submit', e => {
      e.preventDefault();
      // Limpia mensajes anteriores
      successMessage.style.display = 'none';
      errorMessage.style.display = 'none';
      errorMessage.textContent = '';

      const formData = new FormData(form);

      // Validación simple del lado del cliente para la edad
      const ageInput = document.getElementById('age');
      if (ageInput.value < 18) {
        errorMessage.textContent = translations[document.querySelector('.lang-select').value]['error-age'];
        errorMessage.style.display = 'block';
        ageInput.focus();
        return; // Detener el envío del formulario
      }

      fetch(scriptURL, { method: 'POST', body: formData })
        .then(response => {
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          return response.text(); // O response.json() si tu script devuelve JSON
        })
        .then(data => {
          console.log('Form submission successful:', data);
          form.reset(); // Limpia los campos del formulario
          successMessage.style.display = 'block';
          // Opcionalmente, oculta el mensaje de éxito después de unos segundos
          setTimeout(() => {
            successMessage.style.display = 'none';
          }, 5000);
        })
        .catch(err => {
          console.error('Error sending form:', err);
          errorMessage.textContent = translations[document.querySelector('.lang-select').value]['error-send'];
          errorMessage.style.display = 'block';
        });
    });

    // Traducciones Multi-idioma
    const translations = {
      en: {
        title: "Request Access to CLOSE",
        'label-name': "Full Name",
        'label-age': "Age",
        'label-city': "City",
        'label-contact': "Preferred Contact Method",
        'label-number': "Contact Number",
        'label-portfolio': "Social/Portfolio (optional)",
        'label-why': "Why do you want to attend?",
        'label-availability': "Availability",
        'select-option-placeholder': "Select",
        'contact-whatsapp': "WhatsApp",
        'contact-email': "Email",
        'contact-sms': "SMS",
        'submit-button': "Submit Request",
        'success-message': "Request Sent ✔",
        'error-age': "You must be 18 years or older to apply.",
        'error-send': "Error sending form. Please try again."
      },
      es: {
        title: "Solicita acceso a CLOSE",
        'label-name': "Nombre completo",
        'label-age': "Edad",
        'label-city': "Ciudad",
        'label-contact': "Método de contacto preferido",
        'label-number': "Número de contacto",
        'label-portfolio': "Red social / Portafolio (opcional)",
        'label-why': "¿Por qué quieres asistir?",
        'label-availability': "Disponibilidad",
        'select-option-placeholder': "Seleccionar",
        'contact-whatsapp': "WhatsApp",
        'contact-email': "Correo electrónico",
        'contact-sms': "SMS",
        'submit-button': "Enviar solicitud",
        'success-message': "Solicitud enviada ✔",
        'error-age': "Debes tener 18 años o más para aplicar.",
        'error-send': "Error al enviar el formulario. Por favor, inténtalo de nuevo."
      },
      fr: {
        title: "Demander l'accès à CLOSE",
        'label-name': "Nom complet",
        'label-age': "Âge",
        'label-city': "Ville",
        'label-contact': "Méthode de contact préférée",
        'label-number': "Numéro de contact",
        'label-portfolio': "Réseau social / Portfolio (optionnel)",
        'label-why': "Pourquoi souhaitez-vous participer ?",
        'label-availability': "Disponibilité",
        'select-option-placeholder': "Sélectionner",
        'contact-whatsapp': "WhatsApp",
        'contact-email': "E-mail",
        'contact-sms': "SMS",
        'submit-button': "Envoyer la demande",
        'success-message': "Demande envoyée ✔",
        'error-age': "Vous devez avoir 18 ans ou plus pour postuler.",
        'error-send': "Erreur lors de l'envoi du formulaire. Veuillez réessayer."
      },
      de: {
        title: "Zugang zu CLOSE anfragen",
        'label-name': "Vollständiger Name",
        'label-age': "Alter",
        'label-city': "Stadt",
        'label-contact': "Bevorzugte Kontaktmethode",
        'label-number': "Telefonnummer",
        'label-portfolio': "Soziales Profil / Portfolio (opcional)",
        'label-why': "Warum möchtest du teilnehmen?",
        'label-availability': "Verfügbarkeit",
        'select-option-placeholder': "Auswählen",
        'contact-whatsapp': "WhatsApp",
        'contact-email': "E-Mail",
        'contact-sms': "SMS",
        'submit-button': "Anfrage senden",
        'success-message': "Anfrage gesendet ✔",
        'error-age': "Sie müssen mindestens 18 Jahre alt sein, um sich zu bewerben.",
        'error-send': "Fehler beim Senden des Formulars. Bitte versuchen Sie es erneut."
      }
    };

    function updateText(lang) {
      const t = translations[lang];

      // Actualizar textos estáticos
      document.getElementById('title').innerText = t.title;
      document.getElementById('label-name').innerText = t['label-name'];
      document.getElementById('label-age').innerText = t['label-age'];
      document.getElementById('label-city').innerText = t['label-city'];
      document.getElementById('label-contact').innerText = t['label-contact'];
      document.getElementById('label-number').innerText = t['label-number'];
      document.getElementById('label-portfolio').innerText = t['label-portfolio'];
      document.getElementById('label-why').innerText = t['label-why'];
      document.getElementById('label-availability').innerText = t['label-availability'];
      document.querySelector('.btn').innerText = t['submit-button'];
      successMessage.innerText = t['success-message'];

      // Actualizar opciones de selección
      const contactSelect = document.getElementById('contact');
      contactSelect.options[0].text = t['select-option-placeholder'];
      contactSelect.options[1].text = t['contact-whatsapp'];
      contactSelect.options[2].text = t['contact-email'];
      contactSelect.options[3].text = t['contact-sms'];

      // Limpiar cualquier mensaje de error existente al cambiar el idioma
      errorMessage.style.display = 'none';
      errorMessage.textContent = '';
    }

    // Inicializar el texto al cargar la página
    document.addEventListener('DOMContentLoaded', () => {
      const initialLang = document.querySelector('.lang-select').value;
      updateText(initialLang);
    });
  </script>
</body>
</html>
```
